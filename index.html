<!DOCTYPE html>
<html>
   <head>
      <title>Can I Idle Melvor?</title>
      <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
      <meta content="utf-8" http-equiv="encoding">
      <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' >
      <link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
      
      <!-- Vue Stuff -->
      <script src="https://cdn.jsdelivr.net/npm/vue"></script>
      
      <!-- Bootstrap Stuff 4.6 -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
      
      <!-- Site specific style --> 
      <link rel="stylesheet" href="style.css">

      <!-- Sortable table js -->
      <script src="sorttable.js"></script>

      <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZGSWQ92Z2B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-ZGSWQ92Z2B');
        </script>
   </head>
   <body>
      <div id ='app' class="container-fluid">
         <h1 class="text-white text-center my-4">Can I Idle Melvor?</h1>
         <p class="text-white text-center my-4">Up to date as of v0.19.1 - Copy shareable link to Clipboard: <button id="copyLink" type="button" class="btn btn-secondary" @click="getShareURL()">Copy</button></p>
         <div class="row">
            <div class="col-1"></div>
            <div id="content" class="col-10">
               <div class="row col-12">
                  <div class="input-group col-xl col-lg-4 col-md-8">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="totalHealth">Total Health</label>
                     </div>
                     <input id="totalHealth" type="number" class="form-control" min="100" value="100" step="10" v-model="totalHealth" />
                  </div>
                  <div class="input-group col-xl col-lg-4 col-md-8">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="currentDR">Current DR%</label>
                     </div>
                     <input id="currentDR" type="number" class="form-control" min="0" max="87" value="0" v-model="currentDR" />
                  </div>
                  <div class="input-group col-xl col-lg-4 col-md-8">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="autoEatLevel">Auto Eat Level:</label>
                     </div>
                     <select class="custom-select" id="autoEatLevel" v-model="autoEatLevel">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                     </select>
                  </div>
               </div>
               <div class="row col-12">
                  <div class="input-group col-xl col-lg-4 col-md-8" data-toggle="tooltip" data-placement="bottom" title="Increases autoeat threshold by 5%">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="wastefulRing">Wasteful Ring</label>
                     </div>
                     <select id="wastefulRing" class="custom-select" v-model="wastefulRing">
                        <option>Yes</option>
                        <option selected>No</option>
                     </select>
                  </div>
                  <div class="input-group col-xl col-lg-4 col-md-8" data-toggle="tooltip" data-placement="bottom" title="Please be aware this is a beta feature and you should double check the math.">
                    <div class="input-group-prepend">
                        <label class="input-group-text" for="guardianAmulet">Guardian Amulet</label>
                    </div>
                    <select id="guardianAmulet" class="custom-select" v-model="guardianAmulet">
                        <option>Yes</option>
                        <option selected>No</option>
                    </select>
                  </div>
                  <div class="input-group col-xl col-lg-4 col-md-8">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="combatStyle">Combat Style</label>
                     </div>
                     <select id="combatStyle" class="custom-select" v-model="combatStyle">
                        <option>Melee</option>
                        <option>Ranged</option>
                        <option>Magic</option>
                     </select>
                  </div>
                  <div class="input-group col-xl col-lg-4 col-md-8">
                     <div class="input-group-prepend">
                        <label class="input-group-text" for="gameMode">Game Mode</label>
                     </div>
                     <select id="gameMode" class="custom-select" v-model="gameMode">
                        <option>Normal</option>
                        <option>Hardcore</option>
                        <option>Adventure</option>
                     </select>
                  </div>
               </div>
               <hr>
               <ul class="nav nav-pills nav-fill">
                <li class="nav-item">
                   <a class="nav-link active" data-toggle="tab" href="#overview">
                      <h3>Overview</h3>
                   </a>
                </li>
                  <li class="nav-item">
                     <a class="nav-link" data-toggle="tab" href="#dungeons">
                        <h3>Dungeons</h3>
                     </a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" data-toggle="tab" href="#slayer">
                        <h3>Slayer</h3>
                     </a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" data-toggle="tab" href="#allMonsters">
                        <h3>All Monsters</h3>
                     </a>
                  </li>
               </ul>
               <div class="tab-content">
                <div id="overview" class="tab-pane fade show active">
                     <table id='dungeonOverview' class="sortable table table-responsive-md table-striped table-dark table-bordered table-hover">
                         <thead>
                         <tr>
                             <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total DR% you need equipt to safely idle this monster with your currently set HP"><u>DR% Needed</u></div>
                             </th>
                             <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total HP you need to safely idle this monster with your currently set DR%"><u>HP Needed</u></div>
                             </th>
                             <th style="width: 20%" scope="col">Dungeon Name</th>
                             <th style="width: 11%" scope="col">Style</th>
                             <th style="width: 11%" scope="col">Max Hit</th>
                             <th style="width: 11%" scope="col">Reduced Max hit</th>
                         </tr>
                         </thead>
                             <tbody>
                                 <tr v-for="calculatedDungeon in this.dungeons.map(function (dungeon){ return calculateInstance(dungeon); })" :class="{idleable : calculatedDungeon.isIdleable, guardianAmmy : calculatedDungeon.requiresGuardianAmmy}">
                                     <td>{{calculatedDungeon.minimumDR}}</td>
                                     <td>{{calculatedDungeon.minimumHP}}</td>
                                     <td>{{calculatedDungeon.name}}</td>
                                     <td>{{calculatedDungeon.style}}</td>
                                     <td>{{calculatedDungeon.maxHit}}</td>
                                     <td>{{calculatedDungeon.requiresGuardianAmmy ? calculatedDungeon.reducedMaxHit + " Requires Guardian Amulet" : calculatedDungeon.reducedMaxHit}}</td>
                                 </tr>
                             </tbody>
                     </table>
                    <table id='slayerOverview' class="sortable table table-responsive-md table-striped table-dark table-bordered table-hover">
                        <thead>
                        <tr>
                            <th style="width: 11%" scope="col">
                                <div data-toggle="tooltip" data-placement="top" title="Total DR% you need equipt to safely idle this monster with your currently set HP"><u>DR% Needed</u></div>
                            </th>
                            <th style="width: 11%" scope="col">
                                <div data-toggle="tooltip" data-placement="top" title="Total HP you need to safely idle this monster with your currently set DR%"><u>HP Needed</u></div>
                            </th>
                            <th style="width: 20%" scope="col">Slayer Tier</th>
                            <th style="width: 11%" scope="col">Style</th>
                            <th style="width: 11%" scope="col">Max Hit</th>
                            <th style="width: 11%" scope="col">Reduced Max hit</th>
                        </tr>
                        </thead>
                            <tbody>
                                <tr v-for="calculatedTier in this.slayerTeirs.map(function (dungeon){ return calculateInstance(dungeon); })" :class="{idleable : calculatedTier.isIdleable, guardianAmmy : calculatedTier.requiresGuardianAmmy}">
                                    <td>{{calculatedTier.minimumDR}}</td>
                                    <td>{{calculatedTier.minimumHP}}</td>
                                    <td>{{calculatedTier.name}}</td>
                                    <td>{{calculatedTier.style}}</td>
                                    <td>{{calculatedTier.maxHit}}</td>
                                    <td>{{calculatedTier.requiresGuardianAmmy ? calculatedTier.reducedMaxHit + " Requires Guardian Amulet" : calculatedTier.reducedMaxHit}}</td>
                                </tr>
                            </tbody>
                    </table>
                </div>
                  <div id="dungeons" class="tab-pane fade">
                     <div class="input-group mb-3">
                        <div class="input-group-prepend">
                           <label class="input-group-text" for="dungeonChoice">Dungeon:</label>
                        </div>
                        <select class="custom-select" id="dungeonChoice" v-model="dungeonChoice">
                           <option selected hidden>Choose Dungeon</option>
                           <option>Chicken Coop</option>
                           <option>Undead Graveyard</option>
                           <option>Bandit Base</option>
                           <option>Hall of Wizards</option>
                           <option>Spider Forest</option>
                           <option>Miolite Caves</option>
                           <option>Deep Sea Ship</option>
                           <option>Frozen Cove</option>
                           <option>Dragons Den</option>
                           <option>Volcanic Cave</option>
                           <option>Infernal Stronghold</option>
                           <option>Air God Dungeon</option>
                           <option>Water God Dungeon</option>
                           <option>Earth God Dungeon</option>
                           <option>Fire God Dungeon</option>
                        </select>
                     </div>
                     <table class="sortable table table-responsive-md table-striped table-dark table-bordered table-hover">
                        <thead>
                           <tr>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total DR% you need equipt to safely idle this monster with your currently set HP"><u>DR% Needed</u></div>
                              </th>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total HP you need to safely idle this monster with your currently set DR%"><u>HP Needed</u></div>
                              </th>
                              <th style="width: 20%" scope="col">Monster Name</th>
                              <th style="width: 11%" scope="col">Style</th>
                              <th style="width: 11%" scope="col">Max Hit</th>
                              <th style="width: 11%" scope="col">Reduced Max hit</th>
                           </tr>
                        </thead>
                        <tbody>
                            <tr v-for="monster in findMonstersForDungeon(this.dungeonChoice)" :class="{idleable : isIdleable(monster), guardianAmmy : requiresGuardianAmmy(monster)}">
                                <td>{{minDR(monster)}}</td>
                                <td>{{minHP(monster)}}</td>
                                <td>{{monster.name}}</td>
                                <td>{{monster.attackStyle}}</td>
                                <td>{{adjustedMaxHit(monster)}}</td>
                                <td>{{requiresGuardianAmmy(monster) ? reducedMaxHit(monster) + " Requires Guardian Amulet" : reducedMaxHit(monster)}}</td>
                            </tr>
                        </tbody>
                     </table>
                  </div>
                  <div id="slayer" class="tab-pane fade">
                     <div class="input-group mb-3">
                        <div class="input-group-prepend">
                           <label class="input-group-text" for="slayerTier">Slayer Tier:</label>
                        </div>
                        <select class="custom-select" id="slayerTier" v-model="slayerTier">
                           <option selected hidden>Choose Tier</option>
                           <option>Easy</option>
                           <option>Normal</option>
                           <option>Hard</option>
                           <option>Elite</option>
                           <option>Master</option>
                        </select>
                     </div>
                     <table class="sortable table table-responsive-md table-striped table-dark table-bordered table-hover">
                        <thead>
                           <tr>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total DR% you need equipt to safely idle this monster with your currently set HP"><u>DR% Needed</u></div>
                              </th>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total HP you need to safely idle this monster with your currently set DR%"><u>HP Needed</u></div>
                              </th>
                              <th style="width: 20%" scope="col">Monster Name</th>
                              <th style="width: 11%" scope="col">Style</th>
                              <th style="width: 11%" scope="col">Max Hit</th>
                              <th style="width: 11%" scope="col">Reduced Max hit</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr v-for="monster in findMonstersForSlayerTier(this.slayerTier)" 
                               :class="{idleable : isIdleable(monster) && monster.name !== 'Wicked Greater Dragon', warning: monster.name == 'Wicked Greater Dragon'}">
                              <td>{{minDR(monster)}}</td>
                              <td>{{minHP(monster)}}</td>
                              <td>{{monster.name}}</td>
                              <td>{{monster.attackStyle}}</td>
                              <td>{{adjustedMaxHit(monster)}}</td>
                              <td>{{(monster.name !== 'Wicked Greater Dragon') ? reducedMaxHit(monster) : 'The max hit of this monster depends on your max hit and so cannot be calculated'}}</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <div id="allMonsters" class="tab-pane fade">
                     <table class="sortable table table-responsive-md table-striped table-dark table-bordered table-hover">
                        <thead>
                           <tr>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total DR% you need equipt to safely idle this monster with your currently set HP"><u>DR% Needed</u></div>
                              </th>
                              <th style="width: 11%" scope="col">
                                 <div data-toggle="tooltip" data-placement="top" title="Total HP you need to safely idle this monster with your currently set DR%"><u>HP Needed</u></div>
                              </th>
                              <th style="width: 20%" scope="col">Monster Name</th>
                              <th style="width: 11%" scope="col">Style</th>
                              <th style="width: 11%" scope="col">Max Hit</th>
                              <th style="width: 11%" scope="col">Reduced Max hit</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr v-for="monster in monsters.filter(m => m.dungeon != '')" :class="{idleable : isIdleable(monster) && monster.name !== 'Wicked Greater Dragon', warning: monster.name == 'Wicked Greater Dragon'}">
                              <td>{{minDR(monster)}}</td>
                              <td>{{minHP(monster)}}</td>
                              <td>{{monster.name}}</td>
                              <td>{{monster.attackStyle}}</td>
                              <td>{{adjustedMaxHit(monster)}}</td>
                              <td>{{(monster.name !== 'Wicked Greater Dragon') ? reducedMaxHit(monster) : 'The max hit of this monster depends on your max hit and so cannot be calculated'}}</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
            <div class="col-1"></div>
         </div>
         <div class="text-white text-center my-1 mx-auto">
            <p>Styling and formulas used are from the original "Can I Idle This?" website: <a href="https://drboomtown.github.io/">https://drboomtown.github.io/</a></p>
            <p>Further evolved by "Slayer Can I Idle This?" <a href="https://sublimedisciple.github.io/idle-slayer.html">https://sublimedisciple.github.io/idle-slayer.html</a></p>
            <p>For any issues either file a <a href="https://github.com/Silberdrachi/CanIIdle">GitHub ticket</a> or contact @Silber on the Melvor Idle Discord server.</p>
         </div>
      </div>
   </body>
</html>
<script language="javascript">
   // Enable Bootstrap4 tooltips
   $(function () {
      $('[data-toggle="tooltip"]').tooltip();
   });
</script>

<script>
   app = new Vue({
       el: '#app',
       data() {
           return {
               slayerTier: "Easy",
               totalHealth: 100,
               currentDR: 0,
               autoEatLevel: "1",
               combatStyle: "Melee",
               gameMode: "Normal",
               wastefulRing: "No",
               guardianAmulet: "No",
               dungeonChoice: "Chicken Coop",
               dungeons:[
                   {
                       name: "Chicken Coop",
                       monsters: [
                           "Chicken",
                           "Chick",
                           "Mumma Chicken"
                       ]
                   },
                   {
                       name: "Undead Graveyard",
                       monsters: [
                           "Zombie Hand",
                           "Zombie",
                           "Ghost",
                           "Zombie Leader"
                       ]
                   },
                   {
                       name: "Bandit Base",
                       monsters: [
                           "Bandit Trainee",
                           "Bandit",
                           "Bandit Leader"
                       ]
                   },
                   {
                       name: "Hall of Wizards",
                       monsters: [
                           "Wizard",
                           "Master Wizard",
                           "Dark Wizard",
                           "Elder Wizard"
                       ]
                   },
                   {
                       name: "Spider Forest",
                       monsters: [
                           "Spider (lv. 51)",
                           "Spider (lv. 52)",
                           "Evil Spider",
                           "Spider King"
                       ]
                   },
                   {
                       name: "Miolite Caves",
                       monsters: [
                           "Miolite Spring",
                           "Miolite Trio",
                           "Miolite Warden",
                           "Miolite Monarch"
                       ]
                   },
                   {
                       name: "Deep Sea Ship",
                       monsters: [
                           "Pirate",
                           "First Mate",
                           "Pirate Captain",
                           "The Kraken"
                       ]
                   },
                   {
                       name: "Frozen Cove",
                       monsters: [
                           "Ice Monster",
                           "Ice Troll",
                           "Ice",
                           "Protector of Ice"
                       ]
                   },
                   {
                       name: "Dragons Den",
                       monsters: [
                           "Green Dragon",
                           "Blue Dragon",
                           "Red Dragon",
                           "Black Dragon",
                           "Elder Dragon"
                       ]
                   },
                   {
                       name: "Volcanic Cave",
                       monsters: [
                           "Bat",
                           "Big Bat",
                           "The Eye",
                           "The Resurrected Eye",
                           "Vicious Serpent",
                           "Fire Spirit",
                           "Prat, the Protector of Secrets",
                           "Malcs, the Guardian of Melvor"
                       ]
                   },
                   {
                       name: "Infernal Stronghold",
                       monsters: [
                           "Cerberus",
                           "Fearful Eye",
                           "Red Devil",
                           "Pheonix",
                           "Incendius",
                           "Prat, the Guardian of Secrets",
                           "Malcs, the Leader of Dragons"
                       ]
                   },
                   {
                       name: "Air God Dungeon",
                       monsters: [
                           "Air Guard",
                           "Air Monster",
                           "Air Golem",
                           "Aleron",
                           "Voltaire",
                           "Aeris"
                       ]
                   },
                   {
                       name: "Water God Dungeon",
                       monsters: [
                           "Water Guard",
                           "Water Monster",
                           "Water Golem",
                           "Lissia",
                           "Murtia",
                           "Glacia"
                       ]
                   },
                   {
                       name: "Earth God Dungeon",
                       monsters: [
                           "Earth Guard",
                           "Earth Monster",
                           "Earth Golem",
                           "Mistral",
                           "Ophidia",
                           "Terran"
                       ]
                   },
                   {
                       name: "Fire God Dungeon",
                       monsters: [
                           "Fire Guard",
                           "Fire Monster",
                           "Fire Golem",
                           "Pyra",
                           "Ignis",
                           "Ragnar"
                       ]
                   }
               ],
               slayerTeirs: [
                   {
                       name: "Easy",
                       monsters: [
                           "Black Knight",
                           "Hill Giant",
                           "Giant Crab",
                           "Tentacle",
                           "Seagull",
                           "Confused Pirate",
                           "Frozen Archer",
                           "Mummy",
                           "Statue",
                           "Wet Monster",
                           "Moist Monster",
                           "Sweaty Monster",
                           "Many Eyed Monster",
                           "Lots of Eyes",
                           "Fairy",
                           "Goo Monster",
                           "Green Goo Monster",
                           "Golbin",
                           "Ranged Golbin",
                           "Chicken",
                           "Cow",
                           "Junior Farmer",
                           "Adult Farmer",
                           "Wizard",
                           "Steel Knight",
                           "Mithril Knight",
                           "Bandit Trainee",
                           "Bandit",
                           "Plant",
                       ]
                   },
                   {
                       name: "Normal",
                       monsters: [
                           "Moss Giant",
                           "Frozen Mammoth",
                           "Stone Snake",
                           "Undead Warewolf",
                           "Vampire",
                           "Strange Eyed Monser",
                           "Eyes",
                           "Valkyrie",
                           "Angel",
                           "Holy Archer",
                           "Purple Goo Monster",
                           "Scattered Goo Monster",
                           "Green Dragon",
                           "Blue Dragon",
                           "Adamant Knight",
                           "Master Wizard",
                           "Druid",
                           "Thief",
                           "Shaman",
                           "Turkul Raiders",
                           "Turkul Archers",
                           "Turkul Throwers",
                           "Wandering Bard",
                       ]
                   },
                   {
                       name: "Hard",
                       monsters: [
                           "Fierce Devil",
                           "Griffen",
                           "Pegasus",
                           "Raging Horned Elite",
                           "Seething Horned Elite",
                           "Red Dragon",
                           "Black Dragon",
                           "Rune Knight",
                           "Dark Wizard",
                           "Necromancer",
                           "Elementalist",
                           "Turkul Giant",
                           "Turkul General",
                           "Sand Beast",
                           "Paladin",
                           "Priest"
                       ]
                   },
                   {
                       name: "Elite",
                       monsters: [
                           "Dark Horned Elite",
                           "Furious Horned Elite",
                           "Rancora Spider",
                           "Elder Vampire",
                           "Cursed Maiden",
                           "Bounty Hunter"
                       ]
                   },
                   {
                       name: "Master",
                       monsters: [
                           "Chaotic Greater Dragon",
                           "Hunting Greater Dragon",
                           "Wicked Greater Dragon",
                           "Umbora",
                           "Rokken",
                           "Ku-tul",
                       ]
                   }
               ],
               monsters:
                 [
                   {
                       name: "Black Knight",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Hill Giant",
                       attackStyle: "Melee",
                       maxHit: 53
                   },
                   {
                       name: "Giant Crab",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Tentacle",
                       attackStyle: "Melee",
                       maxHit: 34
                   },
                   {
                       name: "Seagull",
                       attackStyle: "Melee",
                       maxHit: 23
                   },
                   {
                       name: "Confused Pirate",
                       attackStyle: "Melee",
                       maxHit: 46
                   },
                   {
                       name: "Frozen Archer",
                       attackStyle: "Ranged",
                       maxHit: 75
                   },
                   {
                       name: "Mummy",
                       attackStyle: "Melee",
                       maxHit: 49
                   },
                   {
                       name: "Statue",
                       attackStyle: "Melee",
                       maxHit: 58
                   },
                   {
                       name: "Wet Monster",
                       attackStyle: "Melee",
                       maxHit: 74
                   },
                   {
                       name: "Moist Monster",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Sweaty Monster",
                       attackStyle: "Melee",
                       maxHit: 46
                   },
                   {
                       name: "Many Eyed Monster",
                       attackStyle: "Ranged",
                       maxHit: 92
                   },
                   {
                       name: "Lots of Eyes",
                       attackStyle: "Melee",
                       maxHit: 68
                   },
                   {
                       name: "Fairy",
                       attackStyle: "Magic",
                       maxHit: 170
                   },
                   {
                       name: "Goo Monster",
                       attackStyle: "Melee",
                       maxHit: 34
                   },
                   {
                       name: "Green Goo Monster",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Golbin",
                       attackStyle: "Melee",
                       maxHit: 23
                   },
                   {
                       name: "Ranged Golbin",
                       attackStyle: "Ranged",
                       maxHit: 27
                   },
                   {
                       name: "Chicken",
                       attackStyle: "Melee",
                       maxHit: 11
                   },
                   {
                       name: "Cow",
                       attackStyle: "Melee",
                       maxHit: 18
                   },
                   {
                       name: "Junior Farmer",
                       attackStyle: "Melee",
                       maxHit: 27
                   },
                   {
                       name: "Adult Farmer",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Master Farmer",
                       attackStyle: "Melee",
                       maxHit: 67
                   },
                   {
                       name: "Wizard",
                       attackStyle: "Magic",
                       maxHit: 120
                   },
                   {
                       name: "Steel Knight",
                       attackStyle: "Melee",
                       maxHit: 32
                   },
                   {
                       name: "Mithril Knight",
                       attackStyle: "Melee",
                       maxHit: 52
                   },
                   {
                       name: "Bandit Trainee",
                       attackStyle: "Ranged",
                       maxHit: 42
                   },
                   {
                       name: "Bandit",
                       attackStyle: "Ranged",
                       maxHit: 82
                   },
                   {
                       name: "Plant",
                       attackStyle: "Melee",
                       maxHit: 11
                   },
                   {
                       name: "Moss Giant",
                       attackStyle: "Melee",
                       maxHit: 124
                   },
                   {
                       name: "Frozen Mammoth",
                       attackStyle: "Melee",
                       maxHit: 142
                   },
                   {
                       name: "Stone Snake",
                       attackStyle: "Magic",
                       maxHit: 120
                   },
                   {
                       name: "Undead Werewolf",
                       attackStyle: "Melee",
                       maxHit: 77
                   },
                   {
                       name: "Vampire",
                       attackStyle: "Ranged",
                       maxHit: 105
                   },
                   {
                       name: "Strange Eyed Monster",
                       attackStyle: "Melee",
                       maxHit: 87
                   },
                   {
                       name: "Eyes",
                       attackStyle: "Melee",
                       maxHit: 125
                   },
                   {
                       name: "Valkyrie",
                       attackStyle: "Melee",
                       maxHit: 116
                   },
                   {
                       name: "Angel",
                       attackStyle: "Magic",
                       maxHit: 190
                   },
                   {
                       name: "Holy Archer",
                       attackStyle: "Ranged",
                       maxHit: 177
                   },
                   {
                       name: "Purple Goo Monster",
                       attackStyle: "Melee",
                       maxHit: 63
                   },
                   {
                       name: "Scattered Goo Monster",
                       attackStyle: "Melee",
                       maxHit: 103
                   },
                   {
                       name: "Green Dragon",
                       attackStyle: "Melee",
                       maxHit: 143
                   },
                   {
                       name: "Blue Dragon",
                       attackStyle: "Melee",
                       maxHit: 168
                   },
                   {
                       name: "Adamant Knight",
                       attackStyle: "Melee",
                       maxHit: 118
                   },
                   {
                       name: "Master Wizard",
                       attackStyle: "Magic",
                       maxHit: 170
                   },
                   {
                       name: "Druid",
                       attackStyle: "Magic",
                       maxHit: 81
                   },
                   {
                       name: "Thief",
                       attackStyle: "Ranged",
                       maxHit: 117
                   },
                   {
                       name: "Shaman",
                       attackStyle: "Magic",
                       maxHit: 137
                   },
                   {
                       name: "Turkul Riders",
                       attackStyle: "Melee",
                       maxHit: 82
                   },
                   {
                       name: "Turkul Archers",
                       attackStyle: "Ranged",
                       maxHit: 112
                   },
                   {
                       name: "Turkul Throwers",
                       attackStyle: "Melee",
                       maxHit: 132
                   },
                   {
                       name: "Fierce Devil",
                       attackStyle: "Melee",
                       maxHit: 128
                   },
                   {
                       name: "Griffin",
                       attackStyle: "Melee",
                       maxHit: 128
                   },
                   {
                       name: "Pegasus",
                       attackStyle: "Melee",
                       maxHit: 264
                   },
                   {
                       name: "Raging Horned Elite",
                       attackStyle: "Melee",
                       maxHit: 146
                   },
                   {
                       name: "Seething Horned Elite",
                       attackStyle: "Melee",
                       maxHit: 243
                   },
                   {
                       name: "Red Dragon",
                       attackStyle: "Melee",
                       maxHit: 212
                   },
                   {
                       name: "Black Dragon",
                       attackStyle: "Melee",
                       maxHit: 268
                   },
                   {
                       name: "Rune Knight",
                       attackStyle: "Melee",
                       maxHit: 212
                   },
                   {
                       name: "Turkul Giant",
                       attackStyle: "Melee",
                       maxHit: 192
                   },
                   {
                       name: "Paladin",
                       attackStyle: "Melee",
                       maxHit: 163
                   },
                   {
                       name: "Dark Wizard",
                       attackStyle: "Magic",
                       maxHit: 210
                   },
                   {
                       name: "Necromancer",
                       attackStyle: "Magic",
                       maxHit: 163
                   },
                   {
                       name: "Elementalist",
                       attackStyle: "Magic",
                       maxHit: 240
                   },
                   {
                       name: "Priest",
                       attackStyle: "Magic",
                       maxHit: 213
                   },
                   {
                       name: "Turkul General",
                       attackStyle: "Ranged",
                       maxHit: 202
                   },
                   {
                       name: "Sand Beast",
                       attackStyle: "Ranged",
                       maxHit: 260
                   },
                   {
                       name: "Dark Horned Elite",
                       attackStyle: "Melee",
                       maxHit: 443
                   },
                   {
                       name: "Bounty Hunter",
                       attackStyle: "Melee",
                       maxHit: 329
                   },
                   {
                       name: "Cursed Maiden",
                       attackStyle: "Magic",
                       maxHit: 450
                   },
                   {
                       name: "Furious Horned Elite",
                       attackStyle: "Ranged",
                       maxHit: 397
                   },
                   {
                       name: "Rancora Spider",
                       attackStyle: "Ranged",
                       maxHit: 450
                   },
                   {
                       name: "Elder Vampire",
                       attackStyle: "Ranged",
                       maxHit: 400
                   },
                   {
                       name: "Chaotic Greater Dragon",
                       attackStyle: "Melee",
                       maxHit: 600
                   },
                   {
                       name: "Umbora",
                       attackStyle: "Melee",
                       maxHit: 930
                   },
                   {
                       name: "Wicked Greater Dragon",
                       attackStyle: "Magic",
                       maxHit: 240
                   },
                   {
                       name: "Ku-tul",
                       attackStyle: "Magic",
                       maxHit: 970
                   },
                   {
                       name: "Hunting Greater Dragon",
                       attackStyle: "Ranged",
                       maxHit: 600
                   },
                   {
                       name: "Rokken",
                       attackStyle: "Ranged",
                       maxHit: 1235
                   },
                   {
                       name: "Chick",
                       attackStyle: "Melee",
                       maxHit: 10
                   },
                   {
                       name: "Mumma Chicken",
                       attackStyle: "Melee",
                       maxHit: 52
                   },
                   {
                       name: "Zombie Hand",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Zombie",
                       attackStyle: "Melee",
                       maxHit: 52
                   },
                   {
                       name: "Ghost",
                       attackStyle: "Melee",
                       maxHit: 62
                   },
                   {
                       name: "Zombie Leader",
                       attackStyle: "Melee",
                       maxHit: 106
                   },
                   {
                       name: "Bandit Leader",
                       attackStyle: "Ranged",
                       maxHit: 174
                   },
                   {
                       name: "Elder Wizard",
                       attackStyle: "Magic",
                       maxHit: 210
                   },
                   {
                       name: "Spider (lv. 51)",
                       attackStyle: "Melee",
                       maxHit: 72
                   },
                   {
                       name: "Spider (lv. 52)",
                       attackStyle: "Melee",
                       maxHit: 72
                   },
                   {
                       name: "Evil Spider",
                       attackStyle: "Melee",
                       maxHit: 102
                   },
                   {
                       name: "Spider King",
                       attackStyle: "Melee",
                       maxHit: 142
                   },
                   {
                       name: "Miolite Sprig",
                       attackStyle: "Melee",
                       maxHit: 180
                   },
                   {
                       name: "Miolite Trio",
                       attackStyle: "Magic",
                       maxHit: 180
                   },
                   {
                       name: "Miolite Warden",
                       attackStyle: "Melee",
                       maxHit: 180
                   },
                   {
                       name: "Miolite Monarch",
                       attackStyle: "Magic",
                       maxHit: 240
                   },
                   {
                       name: "Pirate",
                       attackStyle: "Melee",
                       maxHit: 84
                   },
                   {
                       name: "First Mate",
                       attackStyle: "Melee",
                       maxHit: 131
                   },
                   {
                       name: "Pirate Captain",
                       attackStyle: "Melee",
                       maxHit: 177
                   },
                   {
                       name: "The Kraken",
                       attackStyle: "Melee",
                       maxHit: 204
                   },
                   {
                       name: "Ice Monster",
                       attackStyle: "Melee",
                       maxHit: 92
                   },
                   {
                       name: "Ice Troll",
                       attackStyle: "Melee",
                       maxHit: 102
                   },
                   {
                       name: "Ice",
                       attackStyle: "Melee",
                       maxHit: 102
                   },
                   {
                       name: "Protector of Ice",
                       attackStyle: "Melee",
                       maxHit: 172
                   },
                   {
                       name: "Elder Dragon",
                       attackStyle: "Melee",
                       maxHit: 470
                   },
                   {
                       name: "Bat",
                       attackStyle: "Melee",
                       maxHit: 52
                   },
                   {
                       name: "Big Bat",
                       attackStyle: "Melee",
                       maxHit: 82
                   },
                   {
                       name: "The Eye",
                       attackStyle: "Magic",
                       maxHit: 140
                   },
                   {
                       name: "Resurrected Eye",
                       attackStyle: "Magic",
                       maxHit: 240
                   },
                   {
                       name: "Vicious Serpent",
                       attackStyle: "Ranged",
                       maxHit: 282
                   },
                   {
                       name: "Fire Spirit",
                       attackStyle: "Magic",
                       maxHit: 340
                   },
                   {
                       name: "Prat, the Protector of Secrets",
                       attackStyle: "Ranged",
                       maxHit: 501
                   },
                   {
                       name: "Malcs, the Guardian of Melvor",
                       attackStyle: "Melee",
                       maxHit: 520
                   },
                   {
                       name: "Cerberus",
                       attackStyle: "Melee",
                       maxHit: 162
                   },
                   {
                       name: "Fearful Eye",
                       attackStyle: "Magic",
                       maxHit: 236
                   },
                   {
                       name: "Red Devil",
                       attackStyle: "Melee",
                       maxHit: 314
                   },
                   {
                       name: "Phoenix",
                       attackStyle: "Magic",
                       maxHit: 371
                   },
                   {
                       name: "Incendius",
                       attackStyle: "Melee",
                       maxHit: 433
                   },
                   {
                       name: "Prat, the Guardian of Secrets",
                       attackStyle: "Ranged",
                       maxHit: 522
                   },
                   {
                       name: "Malcs, the Leader of Dragons",
                       attackStyle: "Melee",
                       maxHit: 750
                   },
                   {
                       name: "Air Guard",
                       attackStyle: "Ranged",
                       maxHit: 340
                   },
                   {
                       name: "Air Monster",
                       attackStyle: "Melee",
                       maxHit: 441
                   },
                   {
                       name: "Air Golem",
                       attackStyle: "Ranged",
                       maxHit: 650
                   },
                   {
                       name: "Aleron",
                       attackStyle: "Melee",
                       maxHit: 699
                   },
                   {
                       name: "Voltaire",
                       attackStyle: "Ranged",
                       maxHit: 713
                   },
                   {
                       name: "Aeris",
                       attackStyle: "Ranged",
                       maxHit: 650
                   },
                   {
                       name: "Water Guard",
                       attackStyle: "Magic",
                       maxHit: 370
                   },
                   {
                       name: "Water Monster",
                       attackStyle: "Melee",
                       maxHit: 650
                   },
                   {
                       name: "Water Golem",
                       attackStyle: "Magic",
                       maxHit: 845
                   },
                   {
                       name: "Lissia",
                       attackStyle: "Magic",
                       maxHit: 720
                   },
                   {
                       name: "Murtia",
                       attackStyle: "Melee",
                       maxHit: 733
                   },
                   {
                       name: "Glacia",
                       attackStyle: "Magic",
                       maxHit: 1080
                   },
                   {
                       name: "Earth Guard",
                       attackStyle: "Ranged",
                       maxHit: 320
                   },
                   {
                       name: "Earth Monster",
                       attackStyle: "Melee",
                       maxHit: 650
                   },
                   {
                       name: "Earth Golem",
                       attackStyle: "Melee",
                       maxHit: 850
                   },
                   {
                       name: "Mistral",
                       attackStyle: "Magic",
                       maxHit: 680
                   },
                   {
                       name: "Ophidia",
                       attackStyle: "Melee",
                       maxHit: 699
                   },
                   {
                       name: "Terran",
                       attackStyle: "Melee",
                       maxHit: 950
                   },
                   {
                       name: "Fire Guard",
                       attackStyle: "Melee",
                       maxHit: 650
                   },
                   {
                       name: "Fire Monster",
                       attackStyle: "Melee",
                       maxHit: 487
                   },
                   {
                       name: "Fire Golem",
                       attackStyle: "Magic",
                       maxHit: 580
                   },
                   {
                       name: "Pyra",
                       attackStyle: "Magic",
                       maxHit: 900
                   },
                   {
                       name: "Ignis",
                       attackStyle: "Melee",
                       maxHit: 900
                   },
                   {
                       name: "Ragnar",
                       attackStyle: "Magic",
                       maxHit: 1300
                   },
                   {
                       name: "Skeleton",
                       attackStyle: "Ranged",
                       maxHit: 32
                   },
                   {
                       name: "Leech",
                       attackStyle: "Melee",
                       maxHit: 42
                   },
                   {
                       name: "Wandering Bard",
                       attackStyle: "Magic",
                       maxHit: 118
                   }
                 ]
             };
       },
       methods: {
            adjustedMaxHit(monster){
                if(this.gameMode === "Adventure"){
                    return monster.maxHit*10;
                } else {
                    return monster.maxHit;
                }
            },
            isIdleable(monster){
                return this.reducedMaxHit(monster) <= (this.totalHealth*this.autoEatThreshold);
            },
            requiresGuardianAmmy(monster){
            let reducedHit = this.adjustedMaxHit(monster) - Math.floor(this.adjustedMaxHit(monster) * (Math.floor(this.currentDR * this.combatTriangle[this.getCombatStyle(this.combatStyle)][this.getCombatStyle(monster.attackStyle)])) / 100);
            return (this.guardianAmulet=="Yes" && reducedHit <= this.totalHealth*.5 && reducedHit >= this.totalHealth*this.autoEatThreshold);
            },
            minDR(monster){
                return Math.max(0, Math.ceil(Math.ceil(100 - this.totalHealth / this.adjustedMaxHit(monster) * (100 * this.autoEatThreshold)) / this.combatTriangle[this.getCombatStyle(this.combatStyle)][this.getCombatStyle(monster.attackStyle)]));
            },
            reducedMaxHit(monster){
                let reducedHit = this.adjustedMaxHit(monster) - Math.floor(this.adjustedMaxHit(monster) * (Math.floor(this.currentDR * this.combatTriangle[this.getCombatStyle(this.combatStyle)][this.getCombatStyle(monster.attackStyle)])) / 100);
                if (this.guardianAmulet=="Yes" && reducedHit <= this.totalHealth*.5 && reducedHit >= this.totalHealth*this.autoEatThreshold){
                    reducedHit = this.adjustedMaxHit(monster) - Math.floor(this.adjustedMaxHit(monster) * (Math.floor((parseInt(this.currentDR) + 5) * this.combatTriangle[this.getCombatStyle(this.combatStyle)][this.getCombatStyle(monster.attackStyle)])) / 100);
                }
                return reducedHit;
            },
            minHP(monster){
                return Math.max(100, Math.ceil((this.adjustedMaxHit(monster) - Math.floor(this.adjustedMaxHit(monster) * (Math.floor(this.currentDR * this.combatTriangle[this.getCombatStyle(this.combatStyle)][this.getCombatStyle(monster.attackStyle)])) / 100)) / this.autoEatThreshold / 10) * 10);
            },
            getCombatStyle(style){
                switch (style) {
                    case "Melee":
                        return 0;
                    case "Ranged":
                        return 1;
                    case "Magic":
                        return 2;
                }
            },
            getShareURL(){
                navigator.clipboard.writeText(window.location.protocol + "//" + window.location.hostname + window.location.pathname + "?" + "totalHealth=" + this.totalHealth + 
                        "&" + "currentDR=" + this.currentDR + "&" + "autoEatLevel=" + this.autoEatLevel + "&" + "combatStyle=" + this.combatStyle + "&" + "gameMode=" + this.gameMode +
                        "&" + "wastefulRing=" + this.wastefulRing + "&" + "guardianAmulet=" + this.guardianAmulet)
                    .catch(err => {
                        alert('Error in copying text: ', err);
                    });
            },
            findMonstersForSlayerTier(tier){
                let teirMonsters = this.slayerTeirs.filter(s => s.name == tier)[0].monsters;
                return this.monsters.filter(m=> teirMonsters.includes(m.name));
            },
            findMonstersForDungeon(dungeon){
                let dungeonMonsters = this.dungeons.filter(s => s.name == dungeon)[0].monsters;
                return this.monsters.filter(m=> dungeonMonsters.includes(m.name));
            },
            calculateInstance(instance){
                let instanceMonsters = this.monsters.filter(m=> instance.monsters.includes(m.name));
                let maxDR = -1;
                let currentHighestMonster = null;
                instanceMonsters.forEach(monster => {
                    let dr = this.minDR(monster);
                    if (dr>maxDR){
                        maxDR=dr;
                        currentHighestMonster = {
                            name: instance.name,
                            style: monster.attackStyle,
                            minimumDR: this.minDR(monster),
                            minimumHP: this.minHP(monster),
                            maxHit: this.adjustedMaxHit(monster),
                            reducedMaxHit: this.reducedMaxHit(monster),
                            isIdleable: this.isIdleable(monster),
                            requiresGuardianAmmy: this.requiresGuardianAmmy(monster)
                        }
                    }
                });
                return currentHighestMonster;
            }
       },
       computed: {
           autoEatThreshold(){
             var aethreshold = 0;
             switch (this.autoEatLevel) {
                 case "1":
                     aethreshold = 0.2;
                     break;
                 case "2":
                     aethreshold = 0.3;
                     break;
                 case "3":
                     aethreshold = 0.4;
                     break;
             }
             
             if (this.wastefulRing == "Yes") {
               aethreshold = aethreshold + 0.05;
             }
             
             return aethreshold;
           },
           combatTriangle(){
               if(this.gameMode === "Normal"){
                   return [[1, 1.25, 0.5], [0.95, 1, 1.25], [1.25, 0.85, 1]];
               } else { // GameModes HC/Adventure
                   return [[1, 1.25, 0.25], [0.75, 1, 1.25], [1.25, 0.75, 1]];
               }
           },
       },
        created() {
            if(window.location.search){
                //parse out URL parameters
                let params = new URLSearchParams(document.location.search.substring(1));
                if (params.has("totalHealth")){
                    this.totalHealth = parseInt(params.get("totalHealth"));
                }
                if (params.has("currentDR")){
                    this.currentDR = parseInt(params.get("currentDR"));
                }
                if (params.has("autoEatLevel")){
                    this.autoEatLevel = params.get("autoEatLevel");
                }
                if (params.has("combatStyle")){
                    this.combatStyle = params.get("combatStyle");
                }
                if (params.has("gameMode")){
                    this.gameMode = params.get("gameMode");
                }
                if (params.has("wastefulRing")){
                    this.wastefulRing = params.get("wastefulRing");
                }
                if (params.has("guardianAmulet")){
                    this.guardianAmulet = params.get("guardianAmulet");
                }
            } else {
                if (localStorage.slayerTier) {
                    this.slayerTier = localStorage.slayerTier;
                }
                if (localStorage.totalHealth) {
                    this.totalHealth = localStorage.totalHealth;
                }
                if (localStorage.currentDR) {
                    this.currentDR = localStorage.currentDR;
                }
                if (localStorage.autoEatLevel) {
                    this.autoEatLevel = localStorage.autoEatLevel;
                }
                if (localStorage.combatStyle) {
                    this.combatStyle = localStorage.combatStyle;
                }
                if (localStorage.gameMode) {
                    this.gameMode = localStorage.gameMode;
                }
                if (localStorage.wastefulRing) {
                    this.wastefulRing = localStorage.wastefulRing;
                }
                if (localStorage.guardianAmulet) {
                    this.guardianAmulet = localStorage.guardianAmulet;
                }
                if (localStorage.dungeonChoice) {
                    this.dungeonChoice = localStorage.dungeonChoice;
                }
            }
        },
        watch: {
          totalHealth(newTotalHealth) {
            localStorage.totalHealth = newTotalHealth;
          },
          currentDR(newCurrentDR) {
            localStorage.currentDR = newCurrentDR;
          },
          autoEatLevel(newAutoEatLevel) {
            localStorage.autoEatLevel = newAutoEatLevel;
          },
          combatStyle(newCombatStyle) {
            localStorage.combatStyle = newCombatStyle;
          },
          gameMode(newGameMode) {
            localStorage.gameMode = newGameMode;
          },
          wastefulRing(newWastefulRing) {
            localStorage.wastefulRing = newWastefulRing;
          },
          guardianAmulet(newGuardianAmulet) {
            localStorage.guardianAmulet = newGuardianAmulet;
          },
          dungeonChoice(newDungeonChoice) {
            localStorage.dungeonChoice = newDungeonChoice;
          },
          slayerTier(newSlayerTier) {
            localStorage.slayerTier = newSlayerTier;
          }
        }
   });
</script>
